<!doctype html>
<html class="no-js" lang="en" dir="ltr">
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Phonosynth Demo</title>

<link rel="stylesheet" href="{{ url_for('static', filename='css/foundation.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">

<body class="grid-container">
  {% if config['ENV'] == 'development' %}
    <p class="app-alert">Development
  {% endif %}
  <h1>Phonosynth Demo</h1>
  <ul id="rules" class="callout">
    <li>Upload a file and infer a rule
  </ul>
  <div class="grid-x align-justify">
    <label for="csv-upload" class="button cell small-2">
      Upload file
      <input id="csv-upload" type="file" class="show-for-sr">
    </label>

    <!-- ERSP: New Input Dropdown to Directly Accesss GitHub Files -->
    <form name="Item_1" action="results.html" method='POST'>
      <select 
      id="csv-upload-local" onchange="getSelectValue();">
        <option></option>
        <script>
          var select = document.getElementById("csv-upload-local")
          let name = '{{fileName| tojson}}'
          let refined = JSON.parse(name)
          for(var i = 0; i < refined.length; i++){
            var option = document.createElement("OPTION");
            var text = document.createTextNode(refined[i]);
            option.appendChild(text);
            select.insertBefore(option, select.lastChild);
          }
        </script>
      </select>
      <button type="submit">Compare!</button>
      <script>
        function getSelectValue(){
          let selectedValue = document.getElementById("csv-upload-local").value;
          path = os.path.join("../datasets/" + selectedValue + ".csv")
          f = open(path,"r")
          content = f.read()
        }
      </script>
  </form>
    
    <button id="infer" type="button" class="button cell small-2">Infer rule</button>
  </div>
  <table id="word-stems" class="row">
    <thead>
      <tr>
        <th>Underlying form
        <th>Realization
    <tbody>
  </table>
  
  <script src="{{ url_for('static', filename='js/vendor/jquery.js') }}"></script>
  <script src="{{ url_for('static', filename='js/vendor/jquery.csv.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/vendor/what-input.js') }}"></script>
  <script src="{{ url_for('static', filename='js/vendor/foundation.min.js') }}"></script>
  <script>
    $(document).foundation();
  </script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
